-- Use SQL statements to create the following tables in Corporation Employee Database.
-- Define NOT NULL DEFAULT, UNIQUE, and CHECK constraints wherever appropriate.
-- EMPLOYEE (EmployeeId, Lname, Fname, PositionId, Supervisor, HireDate, Salary,
-- Commission, DeptId, QualId); POSITION (PositionId, PosDesc); DEPT (DeptId,
-- DeptName, Location, EmployeeId); QUALIFICATION (QualId, QualDesc); EMPLEVEL
-- (LevelNo, LowSalary, HighSalary); DEPENDENT (EmployeeId, DependentId, DepDOB,
-- Relation). Insert minimum 5
CREATE TABLE EMPLOYEE (
  EmployeeId NUMBER(6) NOT NULL PRIMARY KEY,
  Lname VARCHAR(10) NOT NULL,
  Fname VARCHAR(10) NOT NULL,
  PositionId NUMBER(6) NOT NULL,
  Supervisor VARCHAR(10),
  HireDate DATE NOT NULL,
  Salary NUMBER(10,2) NOT NULL,
  Commission NUMBER(10,2),
  DeptId NUMBER(6) NOT NULL,
  QualId NUMBER(6)
);
-- ALTER TABLE EMPLOYEE ADD FOREIGN KEY (PositionId) REFERENCES POSITION(PositionId);
-- ALTER TABLE EMPLOYEE ADD FOREIGN KEY (DeptId) REFERENCES DEPT(DeptId);
-- ALTER TABLE EMPLOYEE ADD FOREIGN KEY (QualId) REFERENCES QUALIFICATION(QualId);

CREATE TABLE POSITION (
  PositionId NUMBER(6) NOT NULL PRIMARY KEY,
  PosDesc VARCHAR(20) NOT NULL
);

CREATE TABLE DEPT(
  DeptId NUMBER(6) NOT NULL PRIMARY KEY,
  DeptName VARCHAR(20) NOT NULL,
  Location VARCHAR(10) NOT NULL,
  EmployeeId NUMBER(6)
);
-- ALTER TABLE DEPT MODIFY LOCATION VARCHAR(20);
-- ALTER TABLE DEPT ADD FOREIGN KEY (EmployeeId) REFERENCES EMPLOYEE(EmployeeId);

CREATE TABLE QUALIFICATION (
  QualId NUMBER(6) NOT NULL PRIMARY KEY,
  QualDesc VARCHAR(20) NOT NULL
);
CREATE TABLE EMPLEVEL (
  LevelNo NUMBER(6) NOT NULL PRIMARY KEY,
  LowSalary NUMBER(10,2) NOT NULL,
  HighSalary NUMBER(10,2) NOT NULL
);

CREATE TABLE DEPENDENT (
  EmployeeId NUMBER(6) NOT NULL,
  DependentId NUMBER(6) NOT NULL PRIMARY KEY,
  DepDOB DATE NOT NULL,
  Relation VARCHAR(20) NOT NULL
);
-- ALTER TABLE DEPENDENT ADD FOREIGN KEY (EmployeeId) REFERENCES EMPLOYEE(EmployeeId);

SELECT table_name FROM user_tables;
SELECT 'DROP TABLE ' || table_name || ' CASCADE CONSTRAINTS;' FROM user_tables;
	
-- ALTER TABLE DEPENDENT DROP COLUMN EMPLOYEEID;
-- =====================DESCRIBE TABLE=============
DESC EMPLOYEE;
DESC POSITION;
DESC DEPT;
DESC QUALIFICATION;
DESC EMPLEVEL;
DESC DEPENDENT;
-- =========================DROP TABLE==============
DROP TABLE EMPLOYEE;
DROP TABLE POSITION;
DROP TABLE DEPT;
DROP TABLE QUALIFICATION;
DROP TABLE EMPLEVEL;
DROP TABLE DEPENDENT;

INSERT INTO EMPLOYEE (EmployeeId, Lname, Fname, PositionId, Supervisor, HireDate, Salary, Commission, DeptId, QualId) WITH NAMES AS(
  SELECT 101, 'Smith', 'John', 201, 102, TO_DATE('2020-01-01','YYYY-MM-DD'), 50000, 1000, 301, 401 FROM DUAL UNION ALL
  SELECT 102, 'Johnson', 'Jane', 201, NULL, TO_DATE('2020-02-01','YYYY-MM-DD'), 55000, 2000, 302, 402 FROM DUAL UNION ALL
  SELECT 103, 'Williams', 'Jim', 202, 102, TO_DATE('2020-03-01','YYYY-MM-DD'), 60000, 1500, 303, 403 FROM DUAL UNION ALL
  SELECT 104, 'Jones', 'Lisa', 203, 103, TO_DATE('2020-04-01','YYYY-MM-DD'), 65000, 1700, 304, 404 FROM DUAL UNION ALL
  SELECT 105, 'Brown', 'Bob', 203, 103, TO_DATE('2020-05-01','YYYY-MM-DD'), 70000, 1800, 305, 405 FROM DUAL
)
SELECT * FROM NAMES;

INSERT INTO POSITION (PositionId, PosDesc) WITH NAMES AS(
   SELECT 201, 'Manager' FROM DUAL UNION ALL
   SELECT 202, 'Supervisor' FROM DUAL UNION ALL
   SELECT 203, 'Employee' FROM DUAL UNION ALL
   SELECT 204, 'hr' FROM DUAL UNION ALL
   SELECT 205, 'Staff' FROM DUAL
)
SELECT * FROM NAMES;

INSERT INTO DEPT (DeptId, DeptName, Location, EmployeeId) WITH NAMES AS(
  SELECT 301, 'Sales', 'New York', 101 FROM DUAL UNION ALL
  SELECT 302, 'Marketing', 'Los Angeles', 102 FROM DUAL UNION ALL
  SELECT 303, 'IT', 'Houston', 103 FROM DUAL UNION ALL
  SELECT 304, 'Accounting', 'Chicago', 104 FROM DUAL UNION ALL
  SELECT 305, 'HR', 'Phoenix', 105 FROM DUAL
)
SELECT * FROM NAMES;

INSERT INTO QUALIFICATION (QualId, QualDesc)WITH NAMES AS(
  SELECT 401, 'BA' FROM DUAL UNION ALL
  SELECT 402, 'MA' FROM DUAL UNION ALL
  SELECT 403, 'PhD' FROM DUAL UNION ALL
  SELECT 404, 'MBA' FROM DUAL UNION ALL
  SELECT 405, 'BBA' FROM DUAL
)
SELECT * FROM NAMES;

INSERT INTO EMPLEVEL (LevelNo, LowSalary, HighSalary) WITH NAMES AS(
  SELECT 1, 40000, 50000 FROM DUAL UNION ALL
  SELECT 2, 50000, 60000 FROM DUAL UNION ALL
  SELECT 3, 60000, 70000 FROM DUAL UNION ALL
  SELECT 4, 70000, 80000 FROM DUAL UNION ALL
  SELECT 5, 80000, 90000 FROM DUAL
)
SELECT * FROM NAMES;

INSERT INTO DEPENDENT (EmployeeId, DependentId, DepDOB, Relation) WITH NAMES AS(
  SELECT 101, 1001, TO_DATE('2010-01-01','YYYY-MM-DD'), 'Son' FROM DUAL UNION ALL
  SELECT 102, 1002, TO_DATE('2010-02-01','YYYY-MM-DD'), 'Daughter' FROM DUAL UNION ALL
  SELECT 103, 1003, TO_DATE('2010-03-01','YYYY-MM-DD'), 'Son' FROM DUAL UNION ALL
  SELECT 104, 1004, TO_DATE('2010-04-01','YYYY-MM-DD'), 'Daughter' FROM DUAL UNION ALL
  SELECT 105, 1005, TO_DATE('2010-05-01','YYYY-MM-DD'), 'Son' FROM DUAL
)
SELECT * FROM NAMES;

--=============TABLES=============
SELECT * FROM EMPLOYEE;
SELECT * FROM POSITION;
SELECT * FROM DEPT;
SELECT * FROM QUALIFICATION;
SELECT * FROM EMPLEVEL;
SELECT * FROM DEPENDENT;
DELETE EMPLOYEE WHERE EMPLOYEEID=101;